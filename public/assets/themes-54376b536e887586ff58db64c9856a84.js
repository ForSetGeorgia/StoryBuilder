$(function(){$("input#theme_published_at").datepicker({dateFormat:"yy-mm-dd"}),void 0!==gon.published_at&&gon.published_at.length>0&&$("input#theme_published_at").datepicker("setDate",new Date(gon.published_at)),"true"===$('input:radio[name="theme[is_published]"]:checked').val()?($("#theme_published_at_input").show(),$("#theme_show_home_page_input").show()):($("#theme_published_at_input").hide(),$("#theme_show_home_page_input").hide()),$('input:radio[name="theme[is_published]"]').click(function(){"true"===$(this).val()?($("#theme_published_at_input").show(300),$("#theme_show_home_page_input").show(300)):($("#theme_published_at").val(""),$("#theme_show_home_page_false").prop("checked",!0),$("#theme_published_at_input").hide(300),$("#theme_show_home_page_input").hide(300))}),$(".selectpicker").length>0&&$(".selectpicker").selectpicker(),$("select.add-story").change(function(){var e=Math.floor(999e7*Math.random())+1e7,t=$(this).val(),n=$(this).find("option:selected").data("content"),i=$(this).find("option:selected").data("image"),o=$('#feature-container .feature[data-story-id="'+t+'"]');if(1==$(o).length)$(o).find(".feature-actions input.input-position").attr("value",$("#feature-container .feature:visible").length),$(o).find(".feature-actions input.input-delete").attr("value",""),$(o).appendTo($("#feature-container")),$(o).show();else{var a=$("#feature-template").clone();$(a).find(".feature").attr("data-story-id",t),$(a).find(".feature-image img").attr("src",i),$(a).find(".feature-info").html(n),$(a).find(".feature-actions input.input-story-id").attr("value",t),$(a).find(".feature-actions input.input-position").attr("value",$("#feature-container .feature:visible").length+1),$(a).html($(a).html().replace(/FEATURE-INDEX/g,e)),$("#feature-container").append($(a).html())}$("#feature-container .feature:visible:odd").addClass("even-row").removeClass("odd-row"),$("#feature-container .feature:visible:even").addClass("odd-row").removeClass("even-row"),$(this).find("option:selected").prop("disabled",!0),$(this).val(""),$(this).selectpicker("refresh"),$(this).selectpicker("render"),$("#no_stories").hide()}),$("#feature-container").on("click",".feature .btn-remove",function(e){e.preventDefault();var t=$(this).closest(".feature-actions").find("input.input-story-id").val();$(this).closest(".feature-actions").find("input.input-delete").val("1"),$(this).closest(".feature-actions").find("input.input-position").val(""),$(this).closest(".feature").hide(),$("#feature-container .feature:visible:odd").addClass("even-row").removeClass("odd-row"),$("#feature-container .feature:visible:even").addClass("odd-row").removeClass("even-row"),$('select.add-story option[value="'+t+'"]').prop("disabled",!1),$("select.add-story").selectpicker("refresh"),0==$("#feature-container .feature:visible").length?$("#no_stories").show():$("#no_stories").hide()})}),$("#feature-container").on("click",".feature .btn-up",function(e){e.preventDefault();var t=$(this).closest(".feature");$(t).insertBefore($(t).prev()),$("#feature-container .feature:visible:odd").addClass("even-row").removeClass("odd-row"),$("#feature-container .feature:visible:even").addClass("odd-row").removeClass("even-row"),$(t).find(".feature-actions input.input-position").attr("value",parseInt($(t).find(".feature-actions input.input-position").attr("value"))-1),$(t).next().find(".feature-actions input.input-position").attr("value",parseInt($(t).next().find(".feature-actions input.input-position").attr("value"))+1)}),$("#feature-container").on("click",".feature .btn-down",function(e){e.preventDefault();var t=$(this).closest(".feature");$(t).insertAfter($(t).next()),$("#feature-container .feature:visible:odd").addClass("even-row").removeClass("odd-row"),$("#feature-container .feature:visible:even").addClass("odd-row").removeClass("even-row"),$(t).find(".feature-actions input.input-position").attr("value",parseInt($(t).find(".feature-actions input.input-position").attr("value"))+1),$(t).prev().find(".feature-actions input.input-position").attr("value",parseInt($(t).prev().find(".feature-actions input.input-position").attr("value"))-1)});