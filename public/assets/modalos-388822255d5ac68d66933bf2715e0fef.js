/*
 * jQuery Modalos Plugin 1.0
 * www.jumpstart.ge
 * Copyright 2014, Jumpstart
*/
!function(e){e.fn.modalos=function(t){var i={animation:"fade",animationspeed:300,closeonbackgroundclick:!0,lockscroll:!1,contentscroll:!0,before_open:null,after_open:null,before_close:null,after_close:null,topOffset:60,leftOffset:30,margins:40,paddings:20,fullscreen:!1,aspectratio:!1,width:"962",height:"auto",klass:"",dragscroll:!1},t=e.extend({},i,t);return this.each(function(){function i(){l=!1}function n(){l=!0}function o(){var i=e(window).height(),n=e(window).width();if(t.fullscreen)e(u).height(i-t.topOffset-t.margins),e(u).find(".m-content").css("max-height",i-t.topOffset-t.margins-c).removeClass("fluid"),t.aspectratio?(e(u).width(a(i,n,e(u).height())),e(u).css("left",(n-e(u).width())/2)):(e(u).width(n-t.margins),e(u).css("left",t.margins/2)),e(u).css("top",t.margins/2+t.topOffset);else{var o=t.width>n,s=t.height>i;o||(e(u).width(t.width+t.margins),t.height+t.topOffset>i?e(u).height(i-t.topOffset-t.margins):e(u).height(t.height)),e(u).css("top",s?t.topOffset:(i-t.height)/2>t.topOffset?(i-t.height)/2:t.topOffset),e(u).css("left",o?t.leftOffset:(n-t.width)/2>t.leftOffset?(n-t.width)/2:t.leftOffset)}e("body").css("overflow","hidden")}function a(e,t,i){return Math.ceil(t*i/e)}var s=e(this),r=e(".modalos-wrapper"),l=(e(".modalos-keeper"),!1),c=15,d=null,u=null;r=e("<div class='modalos-wrapper'> \t\t\t\t\t\t\t\t\t\t<div class='m-box'> \t\t\t\t\t\t\t\t\t\t\t<div class='m-close'></div>       \t\t\t\t\t\t\t\t\t<div class='m-content'></div>       \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div>").appendTo("body"),t.dragscroll&&r.dragScroll({}),r.removeClass().addClass("modalos-wrapper "+t.klass),d=r.find(".m-content").css("padding",t.paddings),u=r.find(".m-box"),s.bind("modalos:open",function(){var a=!1;t.before_open&&t.before_open(this),r.off("click"),e(".m-close").off("click"),l||(n(),o(),s.detach(),t.fullscreen||r.css({"overflow-x":"auto","overflow-y":"scroll"}),d.html(e(s).css("display","block")),"fade"!=t.animation||a?(r.show(),i()):r.fadeIn(t.animationspeed,i())),s.off("modalos:open"),t.after_open&&t.after_open()}),s.bind("modalos:close",function(){e("body").css("overflow","initial"),r.css("overflow","hidden"),t.before_close&&t.before_close(this),l||(n(),"fade"==t.animation&&r.fadeOut(t.animationspeed,i()),"none"==t.animation&&r.hide()),s.unbind("modalos:resize"),s.unbind("modalos:close"),r.remove()}),s.bind("modalos:resize",function(){o()}),s.trigger("modalos:open");e(".m-close").on("click",function(){s.trigger("modalos:close")});t.closeonbackgroundclick&&r.css({cursor:"pointer"}).on("click",function(e){e.target==e.currentTarget&&s.trigger("modalos:close")}),e("body").keyup(function(e){27===e.which&&s.trigger("modalos:close")}),e(window).resize(function(){s.trigger("modalos:resize")})})}}(jQuery),function(e){e.fn.dragScroll=function(){var t,i,n,o,a,s=e(this);s.attr("onselectstart","return false;"),s.mousedown(function(s){s.preventDefault(),a=!0,t=s.pageX,i=s.pageY,n=e(this).scrollTop(),o=e(this).scrollLeft()}),s.mouseleave(function(){a=!1}),e("body").mousemove(function(e){if(a){var r=e.pageX,l=e.pageY;s.scrollTop(n-l+i),s.scrollLeft(o-r+t)}}),e("body").mouseup(function(){a=!1})}}(jQuery);